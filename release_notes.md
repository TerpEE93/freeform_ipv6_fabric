# Release Notes
Just trying to keep track of changes as they're made.

## Version 0.3.0
### New features:
- Support for a richer `[edit system]` container.  Current support for:
    * The domain-name command
    * List of DNS servers
    * List of NTP servers
    * Support for RADIUS authentication and setting the authentication-order
    * Syslog to both file and host targets
- Note that you can set the management VRF name in the custom_sys_properties
  file, but it should be left as `mgmt_junos` if you want management functions
  to work properly...

### Bug fixes:
None in this release, thought we've likely introduced a few new ones :)

## Version 0.2.1
### Changed behavior:
- Previous releases of this tool-set supported VXLANs that were one of pure-L2,
  IPv4 only, or IPv6 only.  Missing was support for a dual-stack VXLAN.  That
  is corrected in this release.

- To support the change above (dual-stack VXLANs), the `vrf_vlan` property set
  has been changed.  What was previously called `irb_prefix`, with prefix-mask
  guesses as to whether it was an IPv4 prefix (mask < 32) or an IPv6 prefix
  (mask >= 32) has been removed.  From this release forward, we introduce
  `irb_prefix4` for IPv4 VXLAN prefixes and `irb_prefix6` for IPv6 VXLAN
  prefixes.  Updates have been made to the necessary configuration templates,
  the Python tool `parse_vrf_vlan.json`, and the example spreadsheet.

- The vrf_vlan_example spreadsheet included in the support/ directory is now
  formatted as an .xlsx workbook rather than the older .xls format.  Copy the
  example file to `vrf_vlan.xlsx` and make your edits there.  There is a sheet
  of instructions included in the workbook. 

- The Apstra 4.1.2 reference design sets every L2 port as an edge port under
  `[edit protocols rstp]`.  Updated the `junos_protocols.jinja` to do the
  same thing here.

### Bug fixes:
- The `junos_protocols.jinja` template was creating entries for IPv4-only
  IRB interfaces under the `[edit protocols router-advertisement]` container.
  This was not correct.  The template has been updated so that only IRB
  interfaces with an IPv6 address assigned are included in this configuration
  container.  (This change includes IPv6-only and dual-stack IRB interfaces.)

## Version 0.2.0
New features:
- Added a python script in the `support` folder that will convert a properly-
  formatted Excel spreadsheet of Tenant/VLAN entries into JSON that can be
  pasted into the `vrf_vlan` Property Set in the blueprint.  There is an
  example spreadsheet included in the folder as well.

Changed behavior:
- What was previously called `ip_prefix` in the Configuration Templates and
  Property Sets has been renamed `irb_prefix` for clarity, as the only place
  we used `ip_prefix` was to associate IP addresses with the IRB interfaces.

Big fixes:
- TBD

## Version 0.1.3
Bug fixes only:
- Removed `vrf-target auto` from the configuration of the VSWITCH instance
  generated by the `junos_routing_instances.jinja` template.
- Along those lines... We now allocate route targets per VNI in the VSWITCH
  instance.  Updated the config in the `junos_routing_instances.jinja` template.
- Completely missed the `junos_system.jinja` file.  It's included in the
  package now.
- A routing instance of type mac-vrf must have interfaces attached to the
  virtual switching instance.  If a leaf device was provisioned without host
  interfaces (e.g., just setting up the fabric-facing interfaces), then the
  commit would fail.  Updated `junos_routing_instances.jinja` to make sure
  VLANs are applied to host interfaces on leaf devices before building out
  the VSWITCH routing instance, since that is our mac-vrf instance.
- Fixed `junos_protocols.jinja` so that we only configure IRB interfaces
  under `[edit protocols router-advertisement ]` if the IRB is configured
  on the device.

## Version 0.1.2
Bug fixes only:
- The template for the `BGP-AOS-Policy` was missing term 20, which matched
  on protocol BGP and accepted the routes.  This was preventing spine
  devices from forwarding BGP-learned routes between leafs.
- Cleaned up the resrouce generators to use `lacp_system_ids` for both the
  ESI and LACP system ID values on a LAG bundle.  The old ESI generator
  was still being used in the interface template to generate the ESI value
  on the LAG, and the check was failing (since the resource generator no
  longer existed).  ESI values are now properly generated from the
  `lacp_system_ids` resource generator.

## Version 0.1.1
Bug fixes only:
- Fixed closing braces on LAG member interfaces (one closing brace was missing).
- Added host-facing interfaces to the mac-vrf (virtual switch) instance under
  the `[edit routing-instances]` container on leaf devices.
- Added loopback interfaces to the L3 (instance-type vrf)routing instances.
  These lo0 interfaces use link-local scoped addresses only.  They are
  necessary for protocol support in the routing instance.  These were
  previously missing.
- Added the IRB interfaces in each L3 instance under the
  [ edit prototocl router-advertisement ] container.  These were previously
  missing.
- Moved replace: tag on routing-instances from the top of the container
  to the individual routing instances.  Oops, I wiped out mgmt_junos...
- Added the `default-gateway do-not-advertise` and `extended-vni-list all`
  statements under the `[edit routing-instances VSWITCH protcols evpn]`
  container.
- VLANs and their associated IRB interfaces are only generated on the devices
  where the VLANs are applied.
- Setting the MAC address on the IRB interfaces consistent with the setting
  in the Apstra reference design.

## Version 0.1
Initial release.  Deploys a 3-stage fabric with an IPv6-only underlay, to
include all fabric links and loopback interfaces.  The overlay VXLANs can
be L2-only, IPv4 edge-routed, or IPv6 edge-routed.