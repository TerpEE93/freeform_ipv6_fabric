{
  "label": "junos_routing_options.jinja",
  "text": "{% set dev_router_id = function.get_resource_value(resources, 'router_id', 'fabric_resources', 'devices') %}\n{% set local_asn = function.get_resource_value(resources, 'asn_assignments', 'fabric_resources', 'devices') %}\n{% set prot_prop = property_sets.get('protocol_properties', {} ) %}\n{% set sys_prop = property_sets.get('custom_sys_properties', {} ) %}\n{% set mgt_vrf = sys_prop.mgt_vrf if 'mgt_vrf' in sys_prop else 'mgmt_junos' %}\n\nrouting-options {\n{% if dev_router_id %}\n    router-id {{ dev_router_id|to_ip }};\n{% endif %}\n{% if local_asn %}\n    autonomous-system {{ local_asn }};\n{% endif %}\n    forwarding-table {\n        export PFE-LB;\n        ecmp-fast-reroute;\n        chained-composite-next-hop {\n            ingress {\n                evpn;\n            }\n        }\n    }\n{% if 'sflow' in sys_prop and sys_prop.sflow.enabled and 'sflow' in prot_prop %}\n    rib inet6.0 {\n        static {\n    {% for collector in sys_prop.sflow.collectors %}\n            route {{ collector['host_ip'] }}/128 next-table {{ mgt_vrf }}.inet6.0;\n        }\n    {% endfor %}\n    }\n{% endif %}\n}\n{# EOF #}"
}